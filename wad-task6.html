<!DOCTYPE html>
<head>
    <title>Order Computer Parts</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
</head>
<style>
    legend {
        font-size: 16px;
        font-weight: 800;
    }

    .computer {
        border-radius: 5px;
        border-style: solid;
        fill-opacity: 80%;
        padding: 2px;
    }

    .computer a {
        color: black;
    }
</style>
<html>
    <body>
        <div class="container">
            <center><h2>Configure your order</h2></center>
        </div>
        <div class="container">
            <h3>Order form</h3>
            <p>This is where you can customize your order. You can choose which type of CPU, how much RAM you want and how much storage you need.</p>
            <p>You can add as many computers as you want in your order. Just click on "Add Computer" when you're done configuring it, and it will be automatically added to your order.</p>
        </div>
        <div class="container">
            <h4>Configure your computer</h4>
            <form id="computerConfig" onsubmit="event.preventDefault();"> <!-- this prevents the page to be reloaded when adding a computer to the order -->
                <fieldset><legend>CPU</legend>
                <div class="row">
                    <div class="col-sm-4">
                        <label for="cpuType">CPU:</label><br>
                        <select style="width: 100%;" id="cpuType">
                            <option value="Intel">Intel</option>
                            <option value="AMD">AMD</option>
                        </select><br>
                    </div>
                    <div class="col-sm-4">
                        <label for="cpuCores">CPU cores:</label><br>
                        <select style="width: 100%;" id="cpuCores">
                            <option value="4">4 cores</option>
                            <option value="8">8 cores</option>
                            <option value="12">12 cores</option>
                            <option value="16">16 cores</option>
                            <option value="24">24 cores</option>
                        </select>
                    </div>
                </div></fieldset><br>
                <fieldset><legend>RAM</legend>
                <div class="row">
                    <div class="col-sm-4">
                    <label for="ramAmount">Amount of RAM:</label><br>
                    <select style="width: 100%;" id="ramAmount">
                        <option value="16GB">16GB</option>
                        <option value="32GB">32GB</option>
                        <option value="64GB">64GB</option>
                        <option value="128GB">128GB</option>
                    </select><br>
                    </div>
                    <div class="col-sm-4">
                        <label for="ramType">Type of RAM:</label><br>
                        <select style="width: 100%;" id="ramType">
                            <option value="DDR4">DDR4</option>
                            <option value="DDR5">DDR5</option>
                        </select><br>
                    </div>
                    <div class="col-sm-4">
                        <label for="ramPieces">Number of RAM banks:</label><br>
                        <select style="width: 100%;" id="ramPieces">
                            <option value="2">2</option>
                            <option value="4">4</option>
                            <option value="6">6</option>
                            <option value="8">8</option>
                            <option value="12">12</option>
                            <option value="16">16</option>
                        </select><br>
                        <small>Please note that you can't order more than 8 banks when ordering less than 32GB RAM.</small>
                    </div>
                </div></fieldset><br>
                <fieldset><legend>Storage</legend>
                <div class="row">
                    <div class="col-sm-4">
                        <label for="storageAmount">Amount of storage:</label>
                        <select style="width: 100%;" id="storageAmount">
                            <option value="1TB">1TB</option>
                            <option value="2TB">2TB</option>
                            <option value="4TB">4TB</option>
                            <option value="8TB">8TB</option>
                        </select>
                    </div>
                    <div class="col-sm-4">
                        <label for="storageType">Type of drive(s):</label>
                        <select style="width: 100%;" id="storageType">
                            <option value="HDD">HDD</option>
                            <option value="SSD">SSD</option>
                            <option value="HDD and SSD">HDD + SSD</option>
                        </select>
                        <small>If "HDD + SSD" is selected, we will give you half of each.</small>
                    </div>
                    <div class="col-sm-4">
                        <label for="driveAmount">Amount of drives:</label>
                        <select style="width: 100%" id="driveAmount">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="4">4</option>
                            <option value="8">8</option>
                        </select>
                        <small>You can't select more than 4 drives if the selected storage is less than 2TB.</small>
                    </div>
                </div></fieldset>
                <label>Include accessories?</label> <input type="checkbox" id="includeAccessories"><br>
                <input class="btn btn-success" type="submit" value="Add computer" id="addComputer"/>
            </form>
        </div><br>
        <div class="container">
            <h4>List of items (<a id="itemCount"></a>)</h4>
            <div class="row">
                <div id="computerList">

                </div>
            </div>
        </div>
        <div class="container">
            <h4>Shipment information</h4>
            <form>
                <fieldset><legend>Personal info</legend>
                    <div class="row">
                        <div class="col-sm-4">
                            <label for="customerName">Name</label><br>
                            <input style="width: 100%;" type="text" placeholder="Name" id="customerName"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="customerSurname">Surname</label><br>
                            <input style="width: 100%;" type="text" placeholder="Surname" id="customerSurname"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="phoneNumber">Phone number</label><br>
                            <input style="width: 100%;" type="number" placeholder="Phone number" id="phoneNumber"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="emailAdress">E-mail adress</label><br>
                            <input style="width: 100%;" type="text" placeholder="E-mail adress" id="emailAdress"/>
                        </div>
                    </div>
                </fieldset><br>
                <fieldset><legend>Address</legend>
                    <div class="row">
                        <div class="col-sm-4">
                            <label for="streetName">Street name</label><br>
                            <input style="width: 100%;" type="text" placeholder="Street name" id="streetName"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="streetNumber">Street number</label><br>
                            <input style="width: 100%;" type="text" placeholder="Street number" id="streetNumber"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="zipCode">ZIP code</label><br>
                            <input style="width: 100%;" type="number" placeholder="ZIP code" id="zipCode"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="cityName">City</label><br>
                            <input style="width: 100%;" type="text" placeholder="City" id="cityName"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="provinceName">Province</label><br>
                            <input style="width: 100%;" type="text" placeholder="Province" id="provinceName"/>
                        </div>
                        <div class="col-sm-4">
                            <label for="countryName">Country</label><br>
                            <input style="width: 100%;" type="text" placeholder="Country" id="countryName"/>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div><br>
        <div class="container">
            <form id="completeOrder">
                <input class="btn btn-default" type="submit" value="Place order" id="submitOrder"/>
            </form>
        </div>
        <!-- <div id="orderCompleted" class="modal fade" role="dialog">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Order completed</h4>
                </div>
                <div class="modal-body">
                  <p>Your order has been successfully placed.</p>
                  <p>Please wait for a confirmation e-mail in your inbox.</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div> 
          the code above was supposed to be a modal that pops up when you submit the order, but i scrapped the idea -->
    </body>
</html>
<script>
    // this code block handles what happens when a computer is added to the list
    document.getElementById("computerConfig").addEventListener("submit", function(event) {
        
        // get all of the elements of the computer from the form
        const cpuType = document.getElementById("cpuType").value;
        const cpuCores = document.getElementById("cpuCores").value;

        const ramAmount = document.getElementById("ramAmount").value;
        const ramPieces = document.getElementById("ramPieces").value;
        const ramType = document.getElementById("ramType").value;

        const storageAmount = document.getElementById("storageAmount").value;
        const storageType = document.getElementById("storageType").value;
        const driveAmount = document.getElementById("driveAmount").value;

        const includeAccessories = document.getElementById("includeAccessories").checked;

        // insert all of the elements from the form into an array
        const computerDetails = {
            cpuType, cpuCores, ramAmount, ramPieces, ramType, storageAmount, storageType, driveAmount, includeAccessories
        }

        let computers = JSON.parse(localStorage.getItem("computers")) || [];
        computers.push(computerDetails);
        localStorage.setItem("computers", JSON.stringify(computers));

        listComputers();
    });

    // this function lists all of the computers that the customer added to the order
    function listComputers() {
        const listOfComputers = JSON.parse(localStorage.getItem("computers")) || [];
        const displayComputers = document.getElementById("computerList");

        displayComputers.innerHTML = '';

        // this displays the number of computers that have been added to the order
        const displayItemCount = document.getElementById("itemCount");
        displayItemCount.innerText = listOfComputers.length;

        // display list of computers in the order on the web page
        listOfComputers.forEach((computer, index) => {
            const listDisplayComputers = document.createElement("div");
            listDisplayComputers.className = "col-sm-4 computer";
            listDisplayComputers.innerHTML = `<h4>Computer #${index + 1}</h4><b>CPU:</b> <a>${computer.cpuType}, ${computer.cpuCores} cores</a><br><b>RAM:</b> <a>${computer.ramAmount}, ${computer.ramType}, ${computer.ramPieces} banks</a><br><b>Storage:</b> <a>${computer.storageAmount}, ${computer.storageType}, ${computer.driveAmount} drives</a><br><b>Accessories included:</b> <a>${computer.includeAccessories ? "Yes" : "No"}</a><br><button class="btn btn-danger btn-sm" onclick="removeComputer(${index});">Remove</button>`;
            displayComputers.appendChild(listDisplayComputers);
        });
    }

    // this function removes an item from the list
    function removeComputer(itemNo) {
        let queryItemList = JSON.parse(localStorage.getItem("computers")) || [];
        queryItemList.splice(itemNo, 1);
        localStorage.setItem("computers", JSON.stringify(queryItemList));
        listComputers();
    }

    // this function handles what happens when you place an order
    document.getElementById("completeOrder").addEventListener("submit", function(event) {
        localStorage.clear(); // this will clear whatever was in your order when you submit it
    });

    listComputers();
</script>